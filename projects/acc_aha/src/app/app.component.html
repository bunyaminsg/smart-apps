<router-outlet></router-outlet>
<div *ngIf="patient" class="vh-100">
  <div class="row w-100 m-auto h-100">
    <div class="col-4 p-3 bg-light h-100 overflow-auto">
      <!--      <div class="fw-bold mb-1 text-center">ACC/AHA Calculator</div>-->
      <!--      <div class="card">-->
      <!--        <div class="card-header text-center fw-bold">ACC/AHA Calculator</div>-->
      <!--      </div>-->
      <div class="card mt-2">
        <div class="card-header fw-bold bg-primary text-light">Patient</div>
        <div class="card-body list-group list-group-flush p-0">
          <!--suppress TypeScriptValidateTypes -->
          <div class="list-group-item"><b>Name:</b> {{patient?.name?.at(0)?.family}}, {{patient?.name?.at(0)?.given}}</div>
          <div class="list-group-item"><b>Age:</b> {{age}}</div>
          <div class="list-group-item"><b>Gender:</b> {{patient.gender}}</div>
        </div>
      </div>
      <button class="btn btn-danger w-100 mt-2" (click)="logout()">Change Patient</button>
      <p *ngIf="error" class="text-danger mt-2 fw-bold">{{error}}</p>
      <p class="mt-2 mb-1 fw-bold">ACC/AHA Score</p>
      <div class="progress" style="height: 2.5em" role="progressbar" aria-label="ACC/AHA" [attr.aria-valuenow]="scores[0]" aria-valuemin="0" aria-valuemax="100">
        <div class="progress-bar bg-danger" [ngStyle]="{width: (scores[0] || 0) + '%', 'min-width': '3em'}">{{ scores[0] }}%</div>
      </div>
      <p class="mt-2 mb-1 fw-bold">Healthy Score</p>
      <div class="progress" style="height: 2.5em" role="progressbar" aria-label="ACC/AHA" [attr.aria-valuenow]="scores[1]" aria-valuemin="0" aria-valuemax="100">
        <div class="progress-bar bg-primary" [ngStyle]="{width: (scores[1] || 0) + '%', 'min-width': '3em'}">{{ scores[1] }}%</div>
      </div>
    </div>
    <div class="col p-3 h-100 overflow-auto">
      @if (loadingPatientData) {
        <p *ngIf="loadingPatientData">
          <span class="spinner-border spinner-border-sm" aria-hidden="true"></span> Loading patient data...
        </p>
      } @else {
        <lib-cds-panels [conceptDefinitions]="conceptDefinitions"></lib-cds-panels>
        <div style="text-align: right">
          <button class="btn btn-danger m-2" style="min-width: 10em" (click)="reset()">Reset</button>
          <button class="btn btn-primary m-2" style="min-width: 10em">Save</button>
        </div>
      }
    </div>
  </div>
</div>
